refactor: simplify is_promise with optional chaining
